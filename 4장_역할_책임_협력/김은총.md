## 4장. 역할, 책임, 협력

### 1. 협력
- 최후통첩 게임
인간의 행동을 결정하는 문맥은 개인의 특성보다 **타인과의 협력**이다. 상황이 행동을 결정하는 것이다.
- 앨리스 재판(왕-토끼-모자장수)
세 명의 객체가 서로 협력하여 **요청과 응답**을 전달하며 재판을 수행한다.
- 요청과 응답
객체가 요청을 받는 이유: 요청에 대해 적절하게 응답하는 데 필요한 조건을 충족하기 때문이다. 요청과 응답은 **협력에 참여하는 객체의 책임**을 정의한다.


### 2. 책임
- 분류
- 1. 하는 것(doing)
객체 **생성과 활동** 주관한다.
- 2. 아는 것(knowing)
자신과 타자에 대한 **정보와 행동의 원인** 인지한다.

#### 2-1. 책임과 메시지
- 책임 : 협력 속에서 요청을 수신하는 한 객체의 관점에서 **할 일**을 나열
- 메시지 : 협력에 참여하는 두 객체의 **관계**


### 3. 역할
- 객체가 수행하는 **책임의 집합**
객체가 **협력 안에서** 수행하는 역할이다. 
**재사용**이 가능하기 때문에 유연한 객체지향 설계 가능하다.
ex. 재판에서 역할: 판사-토끼-증인 == 왕-토끼-모자장수 == 여왕-토끼-앨리스


### 4. 협력의 추상화
**역할은 협력으로 추상화할 수 있다**. 역할을 대체할 수 있는 객체는 동일한 메시지를 이해할 수 있는 객체이기 때문이다.
    ==> **대체 가능성**


### 5. 객체지향을 설계하는 방법
- 협력을 따라 흐르는 객체의 책임
**객체의 책임**과 **협력 관계** 구조의 개요를 먼저 짜는 것이 중요하다.
객체의 모습보다는 **객체의 간 협력**에 집중해서 설계.

#### 5-1. 책임-주도 설계
- 책임을 식별한다. 
**시스템의 책임**을 **객체의 책임**으로 변환하고,
협조적인 협력자를 찾아서 책임 할당을 통해 협력 공동체를 구축한다.

#### 5-2. 디자인 패턴 
- 책임-주도 설계의 결과를 표현한다.
반복적으로 발생하는 **문제와 해결방안**으로 정의한다. 
**협력에 참여하는 역할과 책임**이 확실하고 투명한 설계를 제공한다.

#### 5-3. 테스트-주도 개발
- 실패하는 테스트를 통과하는 가장 간단한 코드 작성 후, 리펙터링으로 중복을 제거한다.
- 테스트 자체를 작성하는 것보다 **객체가 전달받을 메시지**를 생각하는 것이 중요하다.
- 전달받는 객체 또는 클라이언트가, 객체(역할)이 메시지 수신 후 반환할 결과 또는 그 과정에서 기대하는 것을 코드로 작성하는 것이다. 즉, **객체가 수행할 책임**을 생각하는 것이다.

